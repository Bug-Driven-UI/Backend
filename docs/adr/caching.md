# ADR: –í–Ω–µ–¥—Ä–µ–Ω–∏–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –≤ BDUIX Backend

–°—Ç–∞—Ç—É—Å: **–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–æ**

---

## –ö–æ–Ω—Ç–µ–∫—Å—Ç

–ù–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ —ç–∫—Ä–∞–Ω–æ–≤ –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏–π –±–µ—Ä—É—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏/–∏–ª–∏ –≤–Ω–µ—à–Ω–∏—Ö
—Å–µ—Ä–≤–∏—Å–æ–≤.

–ü—Ä–æ–±–ª–µ–º—ã —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–¥—Ö–æ–¥–∞:

- –í—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ —Ä–æ—Å—Ç–µ —á–∏—Å–ª–∞ –∑–∞–ø—Ä–æ—Å–æ–≤;
- –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–∫–ª–∏–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ –≤–Ω–µ—à–Ω–∏–º —Å–µ—Ä–≤–∏—Å–∞–º;
- –ü–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è –∑–∞–ø—Ä–æ—Å—ã –æ—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤ –ø—Ä–∏–≤–æ–¥—è—Ç –∫ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—é —Ä–∞–±–æ—Ç—ã –Ω–∞ backend;
- –°–Ω–∏–∂–µ–Ω–∏–µ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç–∏ –ø—Ä–∏ —Ä–æ—Å—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

–î–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ —É–º–µ–Ω—å—à–µ–Ω–∏—è –∑–∞–¥–µ—Ä–∂–µ–∫ –Ω–µ–æ–±—Ö–æ–¥–∏–º –º–µ—Ö–∞–Ω–∏–∑–º –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è.

---

## –†–µ—à–µ–Ω–∏–µ

–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **Redis** –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–≥–æ –∫—ç—à–∞.

–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:

- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ API –∏ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π;
- –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –∫—ç—à–∞ –ø–æ namespace (–Ω–∞–ø—Ä–∏–º–µ—Ä, `screens:`, `actions:`, `commands:`);
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ TTL (time-to-live) –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –¥–∞–Ω–Ω—ã—Ö;
- –ò–Ω–≤–∞–ª–∏–¥–∏–∑–∞—Ü–∏—è –∫—ç—à–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö –≤ –ë–î (event-driven –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–ª–∏ pub/sub –∏–∑ Redis);
- –ú–µ—Ç—Ä–∏–∫–∏ hit/miss, latency –∏ –∑–∞–≥—Ä—É–∑–∫–∏ Redis —á–µ—Ä–µ–∑ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥;
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å fallback –∫ –ª–æ–∫–∞–ª—å–Ω–æ–º—É in-memory –∫—ç—à—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, Caffeine) –¥–ª—è —Å–≤–µ—Ä—Ö–±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞.

---

## –ü–æ—á–µ–º—É Redis?

Redis –≤—ã–±—Ä–∞–Ω –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ, —Ç.–∫.:

- üß© –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç **—Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Äî —É–¥–æ–±–µ–Ω –∏ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è;
- ‚ö°Ô∏è –û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å (in-memory, latency <1ms);
- üîÑ –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã pub/sub –∏ keyspace notifications –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –∏ –∏–Ω–≤–∞–ª–∏–¥–∏–∑–∞—Ü–∏–∏ –∫—ç—à–∞;
- üìä –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (Prometheus, Grafana) –∏ –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏–∏;
- üõ° –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö (RDB –∏ AOF —Ä–µ–∂–∏–º—ã).

---

## –ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**

+ –°—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –∏ –≤–Ω–µ—à–Ω–∏–µ API;
+ –£–º–µ–Ω—å—à–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–∫–ª–∏–∫–∞ (–æ—Å–æ–±–µ–Ω–Ω–æ –¥–ª—è –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è –∑–∞–ø—Ä–æ—Å–æ–≤);
+ –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å –∑–∞ —Å—á—ë—Ç —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–≥–æ –∫—ç—à–∞ (Redis Cluster, Sentinel);
+ –ì–∏–±–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ TTL –∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π —Å–±—Ä–æ—Å–∞ –¥–∞–Ω–Ω—ã—Ö (LRU, LFU, random eviction).

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**

- –£—Å–ª–æ–∂–Ω–µ–Ω–∏–µ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã: –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å Redis (–¥–µ–ø–ª–æ–π, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥, –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å);
- –í–æ–∑–º–æ–∂–Ω–∞ —Ä–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö (–Ω–µ–æ–±—Ö–æ–¥–∏–º–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –∏–Ω–≤–∞–ª–∏–¥–∏–∑–∞—Ü–∏–∏ –∏ –æ–ø–æ–≤–µ—â–µ–Ω–∏—è);
- Redis —Ç—Ä–µ–±—É–µ—Ç —Ä–µ—Å—É—Ä—Å–æ–≤ (–æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–º—è—Ç—å) –∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã –ø–æ–¥ –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–æ–π.

---

## –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã

- **–û—Å—Ç–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É –±–µ–∑ –∫—ç—à–∞** ‚Äî –ø—Ä–æ—Å—Ç–æ, –Ω–æ –Ω–µ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ.
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω—ã–π in-memory –∫—ç—à (Caffeine, Guava)** ‚Äî –±—ã—Å—Ç—Ä–µ–µ –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –∏–Ω—Å—Ç–∞–Ω—Å–∞, –Ω–æ –±–µ–∑ –ø–æ–¥–¥–µ—Ä–∂–∫–∏
  —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ—Å—Ç–∏.
- **CDN –∏–ª–∏ –≤–Ω–µ—à–Ω–∏–µ SaaS-–∫—ç—à–∏** ‚Äî –ø—Ä–∏–º–µ–Ω–∏–º–æ –¥–ª—è —Å—Ç–∞—Ç–∏–∫–∏, –Ω–æ –Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ BDUIX.
